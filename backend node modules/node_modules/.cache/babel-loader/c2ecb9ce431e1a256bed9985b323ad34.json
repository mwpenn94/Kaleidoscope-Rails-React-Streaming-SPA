{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nimport streams from '../apis/streams';\nimport history from '../history';\nimport { SIGN_IN, SIGN_OUT, CREATE_STREAM, FETCH_STREAMS, FETCH_STREAM, DELETE_STREAM, EDIT_STREAM } from './types';\nexport var signIn = function signIn(userId) {\n  return {\n    type: SIGN_IN,\n    payload: userId\n  };\n};\nexport var signOut = function signOut() {\n  return {\n    type: SIGN_OUT\n  };\n};\nexport var createStream = function createStream(formValues) {\n  return /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch, getState) {\n      var userId, response;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              userId = getState().auth.userId;\n              _context.next = 3;\n              return streams.post('/streams', _objectSpread(_objectSpread({}, formValues), {}, {\n                userId: userId\n              }));\n\n            case 3:\n              response = _context.sent;\n              dispatch({\n                type: CREATE_STREAM,\n                payload: response.data\n              });\n              history.push('/');\n\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function (_x, _x2) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n};\nexport var fetchStreams = function fetchStreams() {\n  return /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch) {\n      var response;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return streams.get('/streams');\n\n            case 2:\n              response = _context2.sent;\n              dispatch({\n                type: FETCH_STREAMS,\n                payload: response.data\n              });\n\n            case 4:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function (_x3) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n};\nexport var fetchStream = function fetchStream(id) {\n  return /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch) {\n      var response;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return streams.get(\"/streams/\".concat(id));\n\n            case 2:\n              response = _context3.sent;\n              dispatch({\n                type: FETCH_STREAM,\n                payload: response.data\n              });\n\n            case 4:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function (_x4) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n};\nexport var editStream = function editStream(id, formValues) {\n  return /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch) {\n      var response;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.next = 2;\n              return streams.patch(\"/streams/\".concat(id), formValues);\n\n            case 2:\n              response = _context4.sent;\n              dispatch({\n                type: EDIT_STREAM,\n                payload: response.data\n              });\n              history.push('/');\n\n            case 5:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n\n    return function (_x5) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n};\nexport var deleteStream = function deleteStream(id) {\n  return /*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(dispatch) {\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              _context5.next = 2;\n              return streams[\"delete\"](\"/streams/\".concat(id));\n\n            case 2:\n              dispatch({\n                type: DELETE_STREAM,\n                payload: id\n              });\n              history.push('/');\n\n            case 4:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5);\n    }));\n\n    return function (_x6) {\n      return _ref5.apply(this, arguments);\n    };\n  }();\n};","map":{"version":3,"sources":["/mnt/c/Users/M/dev/flatiron/labs/kaleidoscope/backend/app/javascript/src/actions/index.js"],"names":["streams","history","SIGN_IN","SIGN_OUT","CREATE_STREAM","FETCH_STREAMS","FETCH_STREAM","DELETE_STREAM","EDIT_STREAM","signIn","userId","type","payload","signOut","createStream","formValues","dispatch","getState","auth","post","response","data","push","fetchStreams","get","fetchStream","id","editStream","patch","deleteStream"],"mappings":"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","sourcesContent":["import streams from '../apis/streams';\r\nimport history from '../history';\r\nimport {\r\n  SIGN_IN,\r\n  SIGN_OUT,\r\n  CREATE_STREAM,\r\n  FETCH_STREAMS,\r\n  FETCH_STREAM,\r\n  DELETE_STREAM,\r\n  EDIT_STREAM\r\n} from './types';\r\n\r\nexport const signIn = userId => {\r\n  return {\r\n    type: SIGN_IN,\r\n    payload: userId\r\n  };\r\n};\r\n\r\nexport const signOut = () => {\r\n  return {\r\n    type: SIGN_OUT\r\n  };\r\n};\r\n\r\nexport const createStream = formValues => async (dispatch, getState) => {\r\n  const { userId } = getState().auth;\r\n  const response = await streams.post('/streams', { ...formValues, userId });\r\n\r\n  dispatch({ type: CREATE_STREAM, payload: response.data });\r\n  history.push('/');\r\n};\r\n\r\nexport const fetchStreams = () => async dispatch => {\r\n  const response = await streams.get('/streams');\r\n\r\n  dispatch({ type: FETCH_STREAMS, payload: response.data });\r\n};\r\n\r\nexport const fetchStream = id => async dispatch => {\r\n  const response = await streams.get(`/streams/${id}`);\r\n\r\n  dispatch({ type: FETCH_STREAM, payload: response.data });\r\n};\r\n\r\nexport const editStream = (id, formValues) => async dispatch => {\r\n  const response = await streams.patch(`/streams/${id}`, formValues);\r\n\r\n  dispatch({ type: EDIT_STREAM, payload: response.data });\r\n  history.push('/');\r\n};\r\n\r\nexport const deleteStream = id => async dispatch => {\r\n  await streams.delete(`/streams/${id}`);\r\n\r\n  dispatch({ type: DELETE_STREAM, payload: id });\r\n  history.push('/');\r\n};"]},"metadata":{},"sourceType":"module"}